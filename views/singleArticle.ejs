<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikipedia</title>
    <link rel="stylesheet" href="../css/styles.css">
</head>

<body>
    <nav>
        <a class="nav-link" href="/">Home</a> |
        <a class="nav-link" href="/newArticle">New Article</a> |
        <a class="nav-link" href="/articles">Articles</a> |
    </nav>
    <h1 class="main-heading"> <%= article.title %> </h1>
    <br>
    <div class="article-body">
        <p> <%= article.body %> </p>
    </div>

    <button>Edit Article</button>
    <button onclick="DeleteArticle()">Delete Article</button>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <script>
        function DeleteArticle() {
            $.ajax({
                //using ejs to give read id from article
                url: '/articles/<%=article.id%>',
                type: 'DELETE', //type of http request
                success: function (result) {

                    //If the request was successful simply alert the user that article has been deleted
                    alert("Article has been deleted");

                    //redirect the client to articles route
                    window.location.href="/articles";
                }
            });
        }
    </script>

</body>

</html>